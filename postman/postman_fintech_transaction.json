{
	"info": {
		"_postman_id": "fintech-transactions-collection-2026",
		"name": "fintech",
		"description": "Fintech API - Transaction Management Endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "fintech"
	},
	"item": [
		{
			"name": "Transaction",
			"item": [
				{
					"name": "Transfer Money",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"if (!pm.environment.get('base_url')) {",
									"    pm.environment.set('base_url', 'http://localhost:8000');",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('key');",
									"    pm.expect(jsonData).to.have.property('msg');",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.key).to.eql('success');",
									"});",
									"",
									"pm.test('Data contains transaction object', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('object');",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('transaction_id');",
									"    pm.expect(jsonData.data).to.have.property('user_id');",
									"    pm.expect(jsonData.data).to.have.property('account_sender_id');",
									"    pm.expect(jsonData.data).to.have.property('account_receiver_id');",
									"    pm.expect(jsonData.data).to.have.property('amount');",
									"    pm.expect(jsonData.data).to.have.property('currency');",
									"    pm.expect(jsonData.data).to.have.property('status');",
									"    pm.expect(jsonData.data).to.have.property('created_at');",
									"});",
									"",
									"pm.test('Transaction status is success', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.status).to.eql('success');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "transaction_id",
									"value": "TXN-20260130-123456",
									"type": "text",
									"description": "Unique transaction identifier. Required. Must be a string. Must be unique in the transactions table. Provided by client (Postman/mobile app)."
								},
								{
									"key": "account_sender_id",
									"value": "1",
									"type": "text",
									"description": "Sender account ID. Required. Must be an integer. Must exist in accounts table. Must belong to the user specified in the route parameter."
								},
								{
									"key": "account_receiver_id",
									"value": "2",
									"type": "text",
									"description": "Receiver account ID. Required. Must be an integer. Must exist in accounts table. Must be different from account_sender_id."
								},
								{
									"key": "amount",
									"value": "100.00",
									"type": "text",
									"description": "Transfer amount. Required. Must be a numeric value. Minimum value is 0.01. Sender account must have sufficient balance."
								},
								{
									"key": "currency",
									"value": "USD",
									"type": "text",
									"description": "Currency code. Required. Must be a string with maximum 5 characters (e.g., USD, EUR, SAR)."
								},
								{
									"key": "payload",
									"value": "",
									"type": "text",
									"description": "Optional payload data. Optional. Can be JSON string or null. Will be stored as array in database."
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/users/:user/transactions/transfer",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":user",
								"transactions",
								"transfer"
							],
							"variable": [
								{
									"key": "user",
									"value": "1",
									"description": "User ID"
								}
							]
						},
						"description": "## Documentation\n\n### Description\nTransfers money from one bank account to another. The transfer is processed atomically using database transactions to ensure both account balances are updated and the transaction record is created together. The sender account must belong to the specified user and have sufficient balance. The sender and receiver accounts must be different.\n\n### Notes\n- No authentication required\n- User ID must exist\n- Sender account must belong to the specified user (ownership verification)\n- Sender and receiver accounts must be different (validated in form request)\n- Sender account must have sufficient balance (checked before transfer)\n- Transaction is processed atomically (all or nothing)\n- Sender account balance is debited, receiver account balance is credited\n- Transaction status is set to 'success' upon completion\n- Response follows ResponseTrait standard format\n- Transaction is returned using TransactionResource for consistent formatting\n\n### Request\n- **URL**: `{{base_url}}/api/users/{user}/transactions/transfer`\n- **Method**: `POST`\n- **Content-Type**: `multipart/form-data`\n- **URL Parameters**:\n  | Parameter | Type | Required | Description |\n  |-----------|------|----------|-------------|\n  | user | integer | Yes | User ID that owns the sender account |\n\n#### Body Parameters\n| Key | Type | Required | Validation Rules |\n|-----|------|----------|-----------------|\n| transaction_id | string | Yes | Required, string, unique in transactions table |\n| account_sender_id | integer | Yes | Required, integer, exists:accounts,id |\n| account_receiver_id | integer | Yes | Required, integer, exists:accounts,id, different from account_sender_id |\n| amount | numeric | Yes | Required, numeric, min:0.01 |\n| currency | string | Yes | Required, string, max:5 |\n| payload | string/array | No | Optional, can be JSON string or null |\n\n### Response\n\n#### Response Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| key | string | Response status key, always \"success\" for 200 |\n| msg | string | Response message in Arabic, default \"تم بنجاح\" |\n| data | object | Created transaction object |\n\n#### Transaction Object Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| id | integer | Transaction unique identifier (auto-increment) |\n| transaction_id | string | Unique transaction identifier provided by client |\n| user_id | integer | User ID that initiated the transaction |\n| account_sender_id | integer | Sender account ID |\n| account_receiver_id | integer | Receiver account ID |\n| amount | decimal | Transfer amount (decimal with 2 decimal places) |\n| currency | string | Currency code (max 5 characters) |\n| status | string | Transaction status: 'success', 'pending', or 'fail' |\n| payload | array/null | Optional payload data (stored as array) |\n| created_at | string | Formatted creation timestamp (Y-m-d H:i:s) |\n\n#### Example Response (200 OK)\n```json\n{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"transaction_id\": \"TXN-20260130-123456\",\n        \"user_id\": 1,\n        \"account_sender_id\": 1,\n        \"account_receiver_id\": 2,\n        \"amount\": \"100.00\",\n        \"currency\": \"USD\",\n        \"status\": \"success\",\n        \"payload\": null,\n        \"created_at\": \"2026-01-30 10:00:00\"\n    }\n}\n```\n\n#### Status Codes\n- `200 OK`: Success - Transaction completed and returned\n- `400 Bad Request`: Failure - Insufficient balance, account ownership mismatch, or other error\n- `422 Unprocessable Entity`: Validation errors - Laravel validation error structure"
					},
					"response": [
						{
							"name": "Success - Transfer Completed",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "transaction_id",
											"value": "TXN-20260130-123456",
											"type": "text"
										},
										{
											"key": "account_sender_id",
											"value": "1",
											"type": "text"
										},
										{
											"key": "account_receiver_id",
											"value": "2",
											"type": "text"
										},
										{
											"key": "amount",
											"value": "100.00",
											"type": "text"
										},
										{
											"key": "currency",
											"value": "USD",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions/transfer",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions",
										"transfer"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"transaction_id\": \"TXN-20260130-123456\",\n        \"user_id\": 1,\n        \"account_sender_id\": 1,\n        \"account_receiver_id\": 2,\n        \"amount\": \"100.00\",\n        \"currency\": \"USD\",\n        \"status\": \"success\",\n        \"payload\": null,\n        \"created_at\": \"2026-01-30 10:00:00\"\n    }\n}"
						},
						{
							"name": "Error - Validation Failed",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "transaction_id",
											"value": "",
											"type": "text"
										},
										{
											"key": "account_sender_id",
											"value": "1",
											"type": "text"
										},
										{
											"key": "account_receiver_id",
											"value": "1",
											"type": "text"
										},
										{
											"key": "amount",
											"value": "0",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions/transfer",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions",
										"transfer"
									]
								}
							},
							"status": "Unprocessable Entity",
							"code": 422,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"The transaction id field is required. (and 3 more errors)\",\n    \"errors\": {\n        \"transaction_id\": [\"The transaction id field is required.\"],\n        \"account_receiver_id\": [\"The account receiver id and account sender id must be different.\"],\n        \"amount\": [\"The amount must be at least 0.01.\"],\n        \"currency\": [\"The currency field is required.\"]\n    }\n}"
						},
						{
							"name": "Error - Insufficient Balance",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "transaction_id",
											"value": "TXN-20260130-123456",
											"type": "text"
										},
										{
											"key": "account_sender_id",
											"value": "1",
											"type": "text"
										},
										{
											"key": "account_receiver_id",
											"value": "2",
											"type": "text"
										},
										{
											"key": "amount",
											"value": "999999.00",
											"type": "text"
										},
										{
											"key": "currency",
											"value": "USD",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions/transfer",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions",
										"transfer"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"رصيد الحساب غير كاف\",\n    \"data\": []\n}"
						},
						{
							"name": "Error - Ownership Mismatch",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "transaction_id",
											"value": "TXN-20260130-123456",
											"type": "text"
										},
										{
											"key": "account_sender_id",
											"value": "2",
											"type": "text"
										},
										{
											"key": "account_receiver_id",
											"value": "3",
											"type": "text"
										},
										{
											"key": "amount",
											"value": "100.00",
											"type": "text"
										},
										{
											"key": "currency",
											"value": "USD",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions/transfer",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions",
										"transfer"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"الحساب لا ينتمي إلى هذا المستخدم\",\n    \"data\": []\n}"
						}
					]
				},
				{
					"name": "Get User Transaction History",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"if (!pm.environment.get('base_url')) {",
									"    pm.environment.set('base_url', 'http://localhost:8000');",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('key');",
									"    pm.expect(jsonData).to.have.property('msg');",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.key).to.eql('success');",
									"});",
									"",
									"pm.test('Data is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"if (jsonData.data.length > 0) {",
									"    pm.test('Transaction object has required fields', function () {",
									"        const transaction = jsonData.data[0];",
									"        pm.expect(transaction).to.have.property('id');",
									"        pm.expect(transaction).to.have.property('transaction_id');",
									"        pm.expect(transaction).to.have.property('user_id');",
									"        pm.expect(transaction).to.have.property('account_sender_id');",
									"        pm.expect(transaction).to.have.property('account_receiver_id');",
									"        pm.expect(transaction).to.have.property('amount');",
									"        pm.expect(transaction).to.have.property('currency');",
									"        pm.expect(transaction).to.have.property('status');",
									"        pm.expect(transaction).to.have.property('created_at');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/:user/transactions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":user",
								"transactions"
							],
							"variable": [
								{
									"key": "user",
									"value": "1",
									"description": "User ID"
								}
							]
						},
						"description": "## Documentation\n\n### Description\nRetrieves the complete transaction history for a specific user. Returns an array of all transactions where the user_id matches the specified user, ordered by creation date (most recent first).\n\n### Notes\n- No authentication required\n- User ID must exist\n- Returns all transactions for the specified user only\n- Transactions are ordered by created_at DESC (most recent first)\n- Response follows ResponseTrait standard format\n- Transactions are returned using TransactionResource for consistent formatting\n\n### Request\n- **URL**: `{{base_url}}/api/users/{user}/transactions`\n- **Method**: `GET`\n- **Content-Type**: `application/json`\n- **URL Parameters**:\n  | Parameter | Type | Required | Description |\n  |-----------|------|----------|-------------|\n  | user | integer | Yes | User ID to retrieve transactions for |\n\n### Response\n\n#### Response Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| key | string | Response status key, always \"success\" for 200 |\n| msg | string | Response message in Arabic, default \"تم بنجاح\" |\n| data | array | Array of transaction objects |\n\n#### Transaction Object Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| id | integer | Transaction unique identifier (auto-increment) |\n| transaction_id | string | Unique transaction identifier provided by client |\n| user_id | integer | User ID that initiated the transaction |\n| account_sender_id | integer | Sender account ID |\n| account_receiver_id | integer | Receiver account ID |\n| amount | decimal | Transfer amount (decimal with 2 decimal places) |\n| currency | string | Currency code (max 5 characters) |\n| status | string | Transaction status: 'success', 'pending', or 'fail' |\n| payload | array/null | Optional payload data (stored as array) |\n| created_at | string | Formatted creation timestamp (Y-m-d H:i:s) |\n\n#### Example Response (200 OK)\n```json\n{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"transaction_id\": \"TXN-20260130-123456\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 2,\n            \"amount\": \"100.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 2,\n            \"transaction_id\": \"TXN-20260130-789012\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 3,\n            \"amount\": \"50.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}\n```\n\n#### Status Codes\n- `200 OK`: Success - Returns array of transactions\n- `400 Bad Request`: Failure - User not found or error message"
					},
					"response": [
						{
							"name": "Success - User Transactions",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"transaction_id\": \"TXN-20260130-123456\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 2,\n            \"amount\": \"100.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 2,\n            \"transaction_id\": \"TXN-20260130-789012\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 3,\n            \"amount\": \"50.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}"
						},
						{
							"name": "Error - Failure Response",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/transactions",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"transactions"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"Error message\",\n    \"data\": []\n}"
						}
					]
				},
				{
					"name": "Get Account Transactions as Sender",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"if (!pm.environment.get('base_url')) {",
									"    pm.environment.set('base_url', 'http://localhost:8000');",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('key');",
									"    pm.expect(jsonData).to.have.property('msg');",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.key).to.eql('success');",
									"});",
									"",
									"pm.test('Data is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"if (jsonData.data.length > 0) {",
									"    pm.test('Transaction object has required fields', function () {",
									"        const transaction = jsonData.data[0];",
									"        pm.expect(transaction).to.have.property('id');",
									"        pm.expect(transaction).to.have.property('transaction_id');",
									"        pm.expect(transaction).to.have.property('account_sender_id');",
									"        pm.expect(transaction.account_sender_id).to.eql(parseInt(pm.variables.get('account') || '1'));",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/:user/accounts/:account/transactions/sender",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":user",
								"accounts",
								":account",
								"transactions",
								"sender"
							],
							"variable": [
								{
									"key": "user",
									"value": "1",
									"description": "User ID"
								},
								{
									"key": "account",
									"value": "1",
									"description": "Account ID"
								}
							]
						},
						"description": "## Documentation\n\n### Description\nRetrieves the transaction history for a specific account where the account was the sender. Returns an array of all transactions where the account_sender_id matches the specified account, ordered by creation date (most recent first). The account must belong to the specified user, otherwise an error is returned.\n\n### Notes\n- No authentication required\n- User ID must exist\n- Account must belong to the specified user (ownership verification)\n- Returns only transactions where account was sender (account_sender_id matches)\n- Transactions are ordered by created_at DESC (most recent first)\n- Response follows ResponseTrait standard format\n- Transactions are returned using TransactionResource for consistent formatting\n\n### Request\n- **URL**: `{{base_url}}/api/users/{user}/accounts/{account}/transactions/sender`\n- **Method**: `GET`\n- **Content-Type**: `application/json`\n- **URL Parameters**:\n  | Parameter | Type | Required | Description |\n  |-----------|------|----------|-------------|\n  | user | integer | Yes | User ID that owns the account |\n  | account | integer | Yes | Account ID to retrieve sender transactions for |\n\n### Response\n\n#### Response Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| key | string | Response status key, always \"success\" for 200 |\n| msg | string | Response message in Arabic, default \"تم بنجاح\" |\n| data | array | Array of transaction objects |\n\n#### Transaction Object Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| id | integer | Transaction unique identifier (auto-increment) |\n| transaction_id | string | Unique transaction identifier provided by client |\n| user_id | integer | User ID that initiated the transaction |\n| account_sender_id | integer | Sender account ID (matches the account parameter) |\n| account_receiver_id | integer | Receiver account ID |\n| amount | decimal | Transfer amount (decimal with 2 decimal places) |\n| currency | string | Currency code (max 5 characters) |\n| status | string | Transaction status: 'success', 'pending', or 'fail' |\n| payload | array/null | Optional payload data (stored as array) |\n| created_at | string | Formatted creation timestamp (Y-m-d H:i:s) |\n\n#### Example Response (200 OK)\n```json\n{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"transaction_id\": \"TXN-20260130-123456\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 2,\n            \"amount\": \"100.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 3,\n            \"transaction_id\": \"TXN-20260130-345678\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 3,\n            \"amount\": \"50.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}\n```\n\n#### Status Codes\n- `200 OK`: Success - Returns array of transactions\n- `400 Bad Request`: Failure - User not found, account not found, or ownership mismatch"
					},
					"response": [
						{
							"name": "Success - Account Sender Transactions",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/accounts/1/transactions/sender",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"accounts",
										"1",
										"transactions",
										"sender"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"transaction_id\": \"TXN-20260130-123456\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 2,\n            \"amount\": \"100.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 3,\n            \"transaction_id\": \"TXN-20260130-345678\",\n            \"user_id\": 1,\n            \"account_sender_id\": 1,\n            \"account_receiver_id\": 3,\n            \"amount\": \"50.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}"
						},
						{
							"name": "Error - Account Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/accounts/999/transactions/sender",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"accounts",
										"999",
										"transactions",
										"sender"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"Account not found with ID: 999\",\n    \"data\": []\n}"
						},
						{
							"name": "Error - Ownership Mismatch",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/2/accounts/1/transactions/sender",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"2",
										"accounts",
										"1",
										"transactions",
										"sender"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"الحساب لا ينتمي إلى هذا المستخدم\",\n    \"data\": []\n}"
						}
					]
				},
				{
					"name": "Get Account Transactions as Receiver",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"if (!pm.environment.get('base_url')) {",
									"    pm.environment.set('base_url', 'http://localhost:8000');",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('key');",
									"    pm.expect(jsonData).to.have.property('msg');",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.key).to.eql('success');",
									"});",
									"",
									"pm.test('Data is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"if (jsonData.data.length > 0) {",
									"    pm.test('Transaction object has required fields', function () {",
									"        const transaction = jsonData.data[0];",
									"        pm.expect(transaction).to.have.property('id');",
									"        pm.expect(transaction).to.have.property('transaction_id');",
									"        pm.expect(transaction).to.have.property('account_receiver_id');",
									"        pm.expect(transaction.account_receiver_id).to.eql(parseInt(pm.variables.get('account') || '1'));",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/:user/accounts/:account/transactions/receiver",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":user",
								"accounts",
								":account",
								"transactions",
								"receiver"
							],
							"variable": [
								{
									"key": "user",
									"value": "1",
									"description": "User ID"
								},
								{
									"key": "account",
									"value": "1",
									"description": "Account ID"
								}
							]
						},
						"description": "## Documentation\n\n### Description\nRetrieves the transaction history for a specific account where the account was the receiver. Returns an array of all transactions where the account_receiver_id matches the specified account, ordered by creation date (most recent first). The account must belong to the specified user, otherwise an error is returned.\n\n### Notes\n- No authentication required\n- User ID must exist\n- Account must belong to the specified user (ownership verification)\n- Returns only transactions where account was receiver (account_receiver_id matches)\n- Transactions are ordered by created_at DESC (most recent first)\n- Response follows ResponseTrait standard format\n- Transactions are returned using TransactionResource for consistent formatting\n\n### Request\n- **URL**: `{{base_url}}/api/users/{user}/accounts/{account}/transactions/receiver`\n- **Method**: `GET`\n- **Content-Type**: `application/json`\n- **URL Parameters**:\n  | Parameter | Type | Required | Description |\n  |-----------|------|----------|-------------|\n  | user | integer | Yes | User ID that owns the account |\n  | account | integer | Yes | Account ID to retrieve receiver transactions for |\n\n### Response\n\n#### Response Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| key | string | Response status key, always \"success\" for 200 |\n| msg | string | Response message in Arabic, default \"تم بنجاح\" |\n| data | array | Array of transaction objects |\n\n#### Transaction Object Structure\n| Key | Type | Description |\n|-----|------|-------------|\n| id | integer | Transaction unique identifier (auto-increment) |\n| transaction_id | string | Unique transaction identifier provided by client |\n| user_id | integer | User ID that initiated the transaction |\n| account_sender_id | integer | Sender account ID |\n| account_receiver_id | integer | Receiver account ID (matches the account parameter) |\n| amount | decimal | Transfer amount (decimal with 2 decimal places) |\n| currency | string | Currency code (max 5 characters) |\n| status | string | Transaction status: 'success', 'pending', or 'fail' |\n| payload | array/null | Optional payload data (stored as array) |\n| created_at | string | Formatted creation timestamp (Y-m-d H:i:s) |\n\n#### Example Response (200 OK)\n```json\n{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 2,\n            \"transaction_id\": \"TXN-20260130-789012\",\n            \"user_id\": 2,\n            \"account_sender_id\": 3,\n            \"account_receiver_id\": 1,\n            \"amount\": \"200.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 4,\n            \"transaction_id\": \"TXN-20260130-456789\",\n            \"user_id\": 3,\n            \"account_sender_id\": 4,\n            \"account_receiver_id\": 1,\n            \"amount\": \"150.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}\n```\n\n#### Status Codes\n- `200 OK`: Success - Returns array of transactions\n- `400 Bad Request`: Failure - User not found, account not found, or ownership mismatch"
					},
					"response": [
						{
							"name": "Success - Account Receiver Transactions",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/accounts/1/transactions/receiver",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"accounts",
										"1",
										"transactions",
										"receiver"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"success\",\n    \"msg\": \"تم بنجاح\",\n    \"data\": [\n        {\n            \"id\": 2,\n            \"transaction_id\": \"TXN-20260130-789012\",\n            \"user_id\": 2,\n            \"account_sender_id\": 3,\n            \"account_receiver_id\": 1,\n            \"amount\": \"200.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 10:00:00\"\n        },\n        {\n            \"id\": 4,\n            \"transaction_id\": \"TXN-20260130-456789\",\n            \"user_id\": 3,\n            \"account_sender_id\": 4,\n            \"account_receiver_id\": 1,\n            \"amount\": \"150.00\",\n            \"currency\": \"USD\",\n            \"status\": \"success\",\n            \"payload\": null,\n            \"created_at\": \"2026-01-30 09:00:00\"\n        }\n    ]\n}"
						},
						{
							"name": "Error - Account Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/1/accounts/999/transactions/receiver",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"1",
										"accounts",
										"999",
										"transactions",
										"receiver"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"Account not found with ID: 999\",\n    \"data\": []\n}"
						},
						{
							"name": "Error - Ownership Mismatch",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/users/2/accounts/1/transactions/receiver",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"users",
										"2",
										"accounts",
										"1",
										"transactions",
										"receiver"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"key\": \"failure\",\n    \"msg\": \"الحساب لا ينتمي إلى هذا المستخدم\",\n    \"data\": []\n}"
						}
					]
				}
			]
		}
	]
}

